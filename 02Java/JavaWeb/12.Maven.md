## **概念**

>   Maven 翻译为"专家"、"内行"，是 Apache 下的一个纯 Java 开发的开源项目。基于项目对象模型（缩写：POM）概念，Maven利用一个中央信息片断能管理一个项目的构建、报告和文档等步骤
>
>   Maven 是一个项目管理工具，可以对 Java 项目进行构建、依赖管理
>
>   Maven 也可被用于构建和管理各种项目，例如 C#，Ruby，Scala 和其他语言编写的项目。Maven 曾是 Jakarta 项目的子项目，现为由 Apache 软件基金会主持的独立 Apache 项目

<!--more-->

## 功能

-   构建
-   文档生成
-   报告
-   依赖
-   SCMs
-   发布
-   分发
-   邮件列表

## 约定配置

Maven 提倡使用一个共同的标准目录结构，Maven 使用约定优于配置的原则，大家尽可能的遵守这样的目录结构。如下所示：

| 目录                               | 目的                                                         |
| :--------------------------------- | :----------------------------------------------------------- |
| ${basedir}                         | 存放pom.xml和所有的子目录                                    |
| ${basedir}/src/main/java           | 项目的java源代码                                             |
| ${basedir}/src/main/resources      | 项目的资源，比如说property文件，springmvc.xml                |
| ${basedir}/src/test/java           | 项目的测试类，比如说Junit代码                                |
| ${basedir}/src/test/resources      | 测试用的资源                                                 |
| ${basedir}/src/main/webapp/WEB-INF | web应用文件目录，web项目的信息，比如存放web.xml、本地图片、jsp视图页面 |
| ${basedir}/target                  | 打包输出目录                                                 |
| ${basedir}/target/classes          | 编译输出目录                                                 |
| ${basedir}/target/test-classes     | 测试编译输出目录                                             |
| Test.java                          | Maven只会自动运行符合该命名规则的测试类                      |
| ~/.m2/repository                   | Maven默认的本地仓库目录位置                                  |



## 下载&环境配置

[下载地址](https://maven.apache.org/download.cgi)

下载完成后，在系统环境变量中添加

![image-20200718114235655](img/Maven/1.png)

在 Path 中添加

```
%MAVEN_HOME%\bin
```

![image-20200718114403273](img/Maven/2.png)



## `Maven`软件的目录结构

```
apache-maven-3.6.3
├─ LICENSE
├─ NOTICE
├─ README.txt
├─ bin
│    ├─ m2.conf
│    ├─ mvn   # 用来构建项目
│    ├─ mvn.cmd
│    ├─ mvnDebug
│    ├─ mvnDebug.cmd
│    └─ mvnyjp
├─ boot  # 自身运行所需要的类加载器
│    ├─ plexus-classworlds-2.6.0.jar
│    └─ plexus-classworlds.license
├─ conf
│    ├─ logging
│    │    └─ simplelogger.properties
│    ├─ settings.xml   # 主要配置文件
│    └─ toolchains.xml
└─ lib  # Maven自身运行所需要的 jar包
```



## Maven仓库种类&彼此关系

仓库分三类

*   本地仓库
*   远程仓库（私服）
*   中央仓库

Maven目录下 `apache-maven-3.6.3\conf\settings.xml`

```xml
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd">
  <!-- localRepository
   | The path to the local repository maven will use to store artifacts.
   |
   | Default: ${user.home}/.m2/repository # 默认在C盘用户目录下创建jar包仓库
  <localRepository>F:\safeware\Maven\jar_repository</localRepository>
  # 这里我们修改的本地仓库位置
  -->
```

![image-20200718121815361](img/Maven/3.png)

通过修改 配置文件`apache-maven-3.6.3\conf\settings.xml`

修改`localRepository`标签 来指定本地仓库位置

![image-20200718211453605](img/Maven/4.png)



## Maven项目标准目录结构

```
Maven_project 项目名
├─ src/main/java 核心代码部分
├─ src/main/resources 配置文件部分
├─ src/test/java 测试代码部分
├─ src/test/resources 测试配置文件
├─ src/main/webapp 页面资源 js css img等
```

在IDEA中创建的Maven项目

![image-20200718213337073](img/Maven/5.png)



## Maven常用命令

创建好项目后，在终端中打开

#### `mvn clean`

清除项目编译信息（也就是删除`target`文件夹）

防止因为本地环境不同引起冲突

![image-20200718214105022](img/Maven/6.png)

#### `mvn compile`

对 `src/main/java`中的java文件进行编译  放到 target 目录下

![image-20200718214919467](img/Maven/7.png)

![image-20200718220624380](img/Maven/8.png)

#### `mvn test`

对 `src/test/java` 测试代码进行编译

![image-20200718221028404](img/Maven/9.png)

![image-20200718221109886](img/Maven/10.png)

`target` 目录下有新生成了三个文件夹

![image-20200718221320535](img/Maven/11.png)



#### `mvn package`

将项目打包

需要先执行 `mvn clean`

![image-20200718222013105](img/Maven/12.png)

对 `main` 和 `test` java文件都进行了编译

同时封装了 jar包

![image-20200718222315611](img/Maven/13.png)

#### `mvn install`

在`mvn package` 命令的基础上    将生成的jar包放入了本地仓库

![image-20200718230819281](img/Maven/14.png)

![image-20200718230855352](img/Maven/15.png)

## Maven生命周期

**生命周期的五个阶段（也称默认生命周期）**

*   编译  `mvn compile`
*   测试 `mvn test`
*   打包 `mvn package`
*   安装 `mvn install`
*   发布 `mvn deploy`

**清理生命周期**

*   清除项目编译信息  `mvn clean`

**站点生命周期**



## Maven项目模型图

在项目配置文件 `pom.xml`中 定义了

*   项目基本信息

    ```xml
    <groupId>org.example</groupId>
    <artifactId>Maven1</artifactId>
    <version>1.0-SNAPSHOT</version>
    ```

*   所依赖的jar包信息

    ```xml
    <dependency>
    	<groupId>javax.servlet.jsp</groupId>   # 公司组织名称
    	<artifactId>jsp-api</artifactId>	# 项目名
    	<version>2.0</version>	# 版本号
    </dependency>
    ```

*   所依赖的环境信息

    ```
    
    ```



## IDEA集成 Maven

打开设置

![image-20200718232518515](img/Maven/16.png)

找到 Maven

配置Maven所在的目录   与本地仓库位置

![image-20200718232216525](F:/Typora_img/image-20200718232216525.png)

进入 Runner 在 `VM Options`中添加

```
-DarchetypeCatatlog=internal
```

这样会先利用本地的插件   若没有再在网络上下载







































